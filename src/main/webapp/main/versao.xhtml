<!DOCTYPE html>
<ui:composition template="/WEB-INF/LayoutFullPage.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:jsf="http://xmlns.jcp.org/jsf" xmlns:o="http://omnifaces.org/ui">
	
	<ui:define name="content">
	
			
			<h:form id="content_versao" >
			
			
			<p:breadCrumb class="breadcrumb-container">


				<p:menuitem value="Home" url="home_new.xhtml" />
				<p:menuitem value="Listagem de Versões" url="#" />
			</p:breadCrumb>
			
			<p:messages id="msg" showSummary="true" 
						style="margin-top:10px" showDetail="false" closable="true"
						showIcon="true" />
				
				<p:panel header="Versões" toggleable="true" >
					
						<h:panelGroup>
						
							<p:link styleClass="btn btn-success btn-sm fa fa-cart-plus"
								style="color:#fff;margin: 8px 2px;"
								outcome="/main/versao_novo" rendered="#{versaoController.renderedBotarNovo()}"
								title="Adicionar novo"  >
								<span   style="font-family: Arial">Novo</span>
							</p:link>
							
					</h:panelGroup>
					
					<p:dataTable id="tabela_versao" paginator="true" rows="12"
						value="#{versaoController.findAll()}" var="bean">
						
							<p:column headerText="Versão" >
							<h:outputText escape="false" value="#{bean.nome}" />
						</p:column>
						
						<p:column headerText="Data de Versão" >
							<h:outputText  value="#{bean.dataVersao}"> 
							<f:convertDateTime pattern="dd/MM/yyyy"/>
							</h:outputText>
						</p:column>
						
						<p:column headerText="Descrição" style="text-align:left">
							<h:outputText escape="false" value="#{bean.descricao}" />
						</p:column>
						
				          
						
						<p:column headerText="Ação" style="width:200px;text-align:center">
						
						   <p:commandLink update="form_requisitos"  process="@this" action="#{versaoController.carregaListaRequisitos(bean)}" oncomplete="PF('requisitoDialog').show()"  value="Requisitos" />
				           
						 <p:spacer width="10px" />
						<p:link outcome="/main/versao_novo" value="Editar"  rendered="#{versaoController.renderedBotarNovo()}" >
								<f:param name="id" value="#{bean.id}"/>
				     	</p:link>
				     	
			     	   <p:spacer width="10px" />
						<p:commandLink  value="Excluir" style="margin-left:5px" update="tabela_versao"   rendered="#{versaoController.renderedBotarNovo()}"
						   action="#{versaoController.delete(bean)}">
						 </p:commandLink>
						 
					</p:column>
				</p:dataTable>
			</p:panel>
		</h:form>
		
		
	</ui:define>
	<ui:define name="adicionais">


		<p:dialog header="Requisitos" widgetVar="requisitoDialog"  modal="true"
			showEffect="fade" hideEffect="fade" resizable="false">
			<h:form id="form_requisitos">
				<p:outputPanel id="requisito"  style="width:800px;text-align:center;">
					<p:dataTable id="id" paginator="true" 
						value="#{versaoController.listaRequisitoSelect}" var="bean">

						<p:column headerText="Nome">
							<h:outputText escape="false" value="#{bean.nomeRequisito}" />
						</p:column>
						
						<p:column headerText="Descrição">
							<h:outputText escape="false" value="#{bean.descricaoRequisito}" />
						</p:column>

					</p:dataTable>
				</p:outputPanel>
			</h:form>
		</p:dialog>


		<p:dialog modal="true" style="z-index:1000" widgetVar="statusDialog"
			showHeader="false" draggable="false" closable="false"
			resizable="false">
			<p:graphicImage library="image" name="aguarde.gif" />
			<p:graphicImage style="width:120px;height:70px" library="image"
				name="logofas.png" />
		</p:dialog>

	</ui:define>

</ui:composition>