<!DOCTYPE html>
<ui:composition template="/WEB-INF/LayoutFullPage.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:jsf="http://xmlns.jcp.org/jsf" xmlns:o="http://omnifaces.org/ui">


	<ui:define name="menu_lateral">

		<f:metadata>
			<o:viewParam name="idUser" value="#{usuario_controller.usuario}" />
		</f:metadata>

		<h:form id="tabela_menu">

			<p:ajaxStatus onstart="PF('statusDialog').show()"
				onsuccess="PF('statusDialog').hide()" />

			<p:dialog widgetVar="statusDialog" modal="true" draggable="false"
				closable="false" resizable="false" showHeader="false"
				style="background-color:#FFFFFF; z-index:1009">
				<p:graphicImage library="image" name="aguarde.gif" />
			</p:dialog>

			<p:dataTable id="tab-menu" scrollable="true" emptyMessage="..."
				scrollHeight="300" styleClass="table table-hover"
				value="#{usuario_controller.menus}" var="menu">

				<p:column>
					<p:commandLink action="#{usuario_controller.redirecionar()}"
						style="font-size:1em;" value="#{menu.nome}">
						<f:setPropertyActionListener value="#{menu}"
							target="#{usuario_controller.menu}" />
					</p:commandLink>
					<span style="margin-left: 4px; float: right; color: #849A39"
						class="#{menu.icon}"></span>
				</p:column>

			</p:dataTable>
		</h:form>

	</ui:define>
	<ui:define name="content">
		<div class="container mt-3">
			<h:form id="formUsuario" acceptcharset="ISO-8859-1">
				<p:panel header="Cadastro de Usuário" prependId="false">
					<p:messages id="msgs" showSummary="false" showDetail="true"
						showIcon="true" closable="true" />

					<div class="row">
						<div class="col">
							<p:commandLink styleClass="btn btn-success" type="button"
								action="#{usuario_controller.salvar()}" ajax="false">
								<i class="fa fas fa-save"></i> Salvar</p:commandLink>
							<p:link outcome="/main/cadastro_usuarios_att"
								styleClass="btn btn-outline-dark">
								<i class="fa fas fa-arrow-left"></i> Voltar</p:link>
						</div>
					</div>

					<br />

					<p:panelGrid columns="2" styleClass="container-fluid">
						<p:outputLabel value="Colaborador: " for="colaborador" />
						<p:autoComplete id="colaborador" style="width:100%;"
							requiredMessage="Colaborador é Obrigatório" rendered="true"
							placeholder="Nome" required="true"
							value="#{usuario_controller.usuario.colaborador}"
							completeMethod="#{sv_cadastro_controller.completeProfissional}"
							var="colaborador" itemLabel="#{colaborador.nome}"
							itemValue="#{colaborador}" converter="colaboradorConverter"
							minQueryLength="2" forceSelection="true" />

						<p:outputLabel value="Email: " for="email" />
						<p:inputText id="email"
							value="#{usuario_controller.usuario.email}"
							placeholder="exemplo@fas-amazonas.org">
							<f:validateRegex
								pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
						</p:inputText>

						<p:outputLabel value="Perfil: " for="perfil"
							rendered="#{usuario_controller.poderEditar()}" />
						<p:selectOneMenu id="perfil"
							value="#{usuario_controller.usuario.perfil}"
							rendered="#{usuario_controller.poderEditar()}"
							converter="perfilConverter">
							<f:selectItems value="#{usuario_controller.listaPerfil()}"
								var="perfil" itemLabel="#{perfil.descricao}"
								itemValue="#{perfil}" />
						</p:selectOneMenu>

						<p:outputLabel value="Usuário: " for="username" />
						<p:inputText id="username" required="true"
							requiredMessage="O campo Usuário é obrigatório"
							value="#{usuario_controller.usuario.nomeUsuario}" />

						<p:outputLabel value="Digite a Senha: " for="pwd1" />
						<p:password id="pwd1" redisplay="true" value="#{usuario_controller.usuario.senha}"
							disabled="#{usuario_controller.usuario.id.equals(null) == false}"
							requiredMessage="O campo Senha é obrigatório" match="pwd2"
							label="Senha" />

						<p:outputLabel value="Confirme a Senha: " for="pwd2" />
						<p:password id="pwd2" redisplay="true" value="#{usuario_controller.usuario.senha}"
							requiredMessage="O campo Confirmar Senha é obrigatório"
							disabled="#{usuario_controller.usuario.id.equals(null) == false}"
							label="Confirmação" />

					</p:panelGrid>

				</p:panel>
			</h:form>
		</div>
	</ui:define>

</ui:composition>