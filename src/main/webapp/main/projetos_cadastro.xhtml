<ui:composition template="/WEB-INF/LayoutFullPage.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:jsf="http://xmlns.jcp.org/jsf" xmlns:o="http://omnifaces.org/ui">




	<ui:define name="content">

		<script type="text/javascript">
			function start() {
				PF('statusDialog').show();
			}
			function stop() {
				PF('statusDialog').hide();
			}

			function stopDlgfilter() {
				PF('dlg_filtro_compra').hide();
			}
		</script>

		<style type="text/css">
.oppt .ui-widget {
	font-size: 94%;
}
</style>




		<h:form id="form-cadastro-projeto" prependId="false">

			<h:outputStylesheet library="css" name="project/style.css" />

			<f:metadata>
				<o:viewParam name="project" value="#{projetoBean.projeto}" />
				<o:viewParam name="type" value="#{projetoBean.filtro.tipo}" />
				<f:viewAction action="#{projetoBean.initCadastro()}" />
			</f:metadata>

			<p:messages showSummary="false" showDetail="true" closable="true">
				<p:autoUpdate></p:autoUpdate>
			</p:messages>

			<p:breadCrumb>
				<p:menuitem value="Categories" url="home_new.xhtml" />
				<p:menuitem value="Lista de Projetos" url="projetos.xhtml" />
				<p:menuitem value="Cadastro de Projetos" />
			</p:breadCrumb>


			<div class="default-style-form-filter" style="margin-bottom: 50px;">

				<p:tabView id="tab_projeto" binding="#{projetoBean.tabviewProjeto}"
					scrollable="true">

					<p:ajax event="tabChange"
						listener="#{projetoBean.definirTabProjeto()}" onstart="start();"
						onsuccess="stop();" onerror="stop();"
						update="form-cadastro-projeto" />

					<p:tab id="cadastro_projeto" title="Informações gerais">
						<ui:include src="/main/project/info_gerais.xhtml" />
					</p:tab>

					<p:tab id="enquad" title="Enquadramento">
						<ui:include src="/main/project/enquadramento.xhtml" />
					</p:tab>

					<p:tab id="cadastro_rubrica" title="Orçamento"
						rendered="#{projetoBean.projeto.id != null}">
						<ui:include src="/main/project/projeto_tab02.xhtml" />
					</p:tab>

					<p:tab id="objetivos" title="Objetivos"
						rendered="#{projetoBean.projeto.id != null}">
						<ui:include src="/main/project/objetivos.xhtml" />
					</p:tab>

					<p:tab id="cadastro_objetivos" title="Indicadores/Métricas"
						rendered="#{projetoBean.projeto.id != null}">
						<ui:include src="/main/project/projeto_tab09.xhtml" />
					</p:tab>

					<p:tab id="categoria_projeto" title="Atividades"
						rendered="#{projetoBean.projeto.id != null}">
						<ui:include src="/main/project/projeto_tab07.xhtml" />
					</p:tab>



					<p:tab id="planejamento_projeto" title="Cronograma"
						rendered="#{projetoBean.projeto.id != null}">
						<ui:include src="/main/projeto_tab08.xhtml" />
					</p:tab>
					
					<p:tab id="exec-proj"
						rendered="true"
						title="Execução de projetos">
						<ui:include src="/main/project/execucao_projetos.xhtml" />
					</p:tab>

					<p:tab id="graf_projeto" title="Gráficos" rendered="false">
						<ui:include src="/main/project/projeto_tab10.xhtml" />
					</p:tab>

					<p:tab id="painelIndicadores"
						rendered="#{projetoBean.projeto.id != null}"
						title="Painel de Indicadores">
						<ui:include src="/main/projeto_tab11.xhtml" />
					</p:tab>

					<p:tab rendered="false" id="atividade_projeto"
						title="Linhas dos projetos">
						<ui:include src="/main/project/projeto_tab05.xhtml" />
					</p:tab>

					<p:tab rendered="false" id="extrato_projeto" title="Extrato">
						<ui:include src="/main/project/projeto_tab04.xhtml" />
					</p:tab>


				</p:tabView>

			</div>

			<div class="fixed-btn">

				<p:panel id="btn-panel">
					<div id="btn-panel-wizard" class="ui-g ui-fluid"
						style="margin-bottom: 10px">

						<div class="ui-g-12">

							<p:commandLink styleClass="btn btn-success btn-sm "
								action="#{projetoBean.salvarMODE01()}" oncomplete="stop()"
								style="color:#fff; margin: 2px;" onstart="start();"
								update=":form-cadastro-projeto"
								process="@this,:form-cadastro-projeto:tab_projeto:panel-info-geral, :form-cadastro-projeto:tab_projeto:panel-enquadramento"
								onsuccess="stop();" onerror="stop();">
								<span class="glyphicon glyphicon-floppy-disk"></span>
								<span style="margin: 3px;">Salvar</span>
							</p:commandLink>

							<p:commandLink style="color:#FFF;margin-left:5px"
								value="Aprovar Projeto" styleClass="btn btn-primary btn-sm"
								oncomplete="PF('dlgAprovacaoProjeto').show()" process="@this"
								rendered="#{projetoBean.podeAprovar(null)}">
								<span class="glyphicon glyphicon-ok"></span>
								<span style="margin: 3px;">Aprovar Projeto</span>
							</p:commandLink>

							<p:link styleClass="btn btn-danger btn-sm"
								style="margin-left:5px;color:#fff" title="Cancelar"
								outcome="/main/projetos">
								<span class="glyphicon glyphicon-remove"></span>
								<span style="margin: 3px;">Sair</span>
							</p:link>
						</div>

					</div>

				</p:panel>
			</div>

			<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
				<p:commandButton value="Sim" type="button"
					styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
				<p:commandButton value="Não" type="button"
					styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
			</p:confirmDialog>

		</h:form>

	</ui:define>

	<ui:define name="adicionais">

		<script type="text/javascript">
			function setarWidthHeight(id) {
				var htmlTag = document.getElementById(id);
				htmlTag.style.height = Math.floor(window.innerHeight * 0.98)
						+ "px";
				htmlTag.style.width = Math.floor(window.innerWidth * 0.98)
						+ "px";

			}
		</script>

		<p:dialog modal="true" style="z-index:1000" widgetVar="statusDialog"
			showHeader="false" draggable="false" closable="false"
			resizable="false">
			<p:graphicImage library="image" name="aguarde.gif" />
			<p:graphicImage style="width:120px;height:70px" library="image"
				name="logofas.png" />
		</p:dialog>




		<p:dialog id="dlg-atividade" header="Cadastrar Atividade"
			widgetVar="dlg_cadastro_atividade" modal="true" resizable="false"
			showEffect="clip" hideEffect="clip" height="100%" width="100%">

			<h:form id="form-cadastro-atividade">

				<p:confirmDialog global="true">
					<p:commandButton value="Não" type="button"
						styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
					<p:commandButton value="Sim" type="button"
						styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
				</p:confirmDialog>


				<p:messages id="msg-frontal-atividade" showSummary="false"
					showDetail="true" closable="true" />


				<div class="cadastro-atividade default-style-form-filter"
					style="margin-right: auto; margin-left: auto;">

					<p:panelGrid columns="1" styleClass="ui-noborder"
						style="width:100%" id="atividade-gridi">
						<p:panel id="panel-form-nova-atividade">
							<div class="ui-g ui-fluid">
								<div class="ui-g-3 form-group focused">
									<p:outputLabel value="Título" for="titulo" />
									<p:inputText id="titulo"
										value="#{projetoBean.atividadeProjeto.nome}" size="100"
										required="true" requiredMessage="Campo 'Título' é obrigatório"
										maxlength="100" />
								</div>



								<div class="ui-g-3 form-group focused">
									<p:outputLabel value="Localizador:" for="localizador" />
									<p:autoComplete id="localizador" panelStyle="width:180px"
										requiredMessage="Campo 'Localizador' obrigatório"
										rendered="true" placeholder="Destino" required="true"
										value="#{projetoBean.atividadeProjeto.localizador}"
										completeMethod="#{fornecedor_controller.completeLocalidade}"
										var="cidade" itemLabel="#{cidade.nome}" itemValue="#{cidade}"
										converter="localConverterVI" minQueryLength="3"
										forceSelection="true" />
								</div>

								<div class="ui-g-6 form-group focused">
									<p:outputLabel value="Descrição" for="descricao_atividade" />
									<p:inputText id="descricao_atividade"
										value="#{projetoBean.atividadeProjeto.descricao}" />
								</div>

								<div class="ui-g-3 form-group focused">
									<p:outputLabel value="Metas" for="metas" />
									<p:selectOneMenu id="metas" required="true"
										value="#{projetoBean.atividadeProjeto.meta}"
										converter="metaConversor" panelStyle="width:160px"
										effect="fade" filter="true" filterMatchMode="startsWith">
										<f:selectItem noSelectionOption="true" />
										<f:selectItems value="#{projetoBean.listaMetas}" var="meta"
											itemLabel="#{meta.nome}" itemValue="#{meta}" />
									</p:selectOneMenu>
								</div>

								<div class="ui-g-3 form-group focused">
									<p:outputLabel value="Valor:" for="valorAtividade" />
									<p:inputText value="#{projetoBean.atividadeProjeto.valor}"
										id="valorAtividade" required="true"
										onkeypress="return formatarNumero(this,event,19,2);">
										<f:convertNumber minFractionDigits="2" maxFractionDigits="2"
											locale="pt_BR" />
									</p:inputText>
								</div>

								<div class="ui-g-3 form-group focused">
									<p:outputLabel value="Responsável" for="respo" />
									<p:inputText id="respo"
										value="#{projetoBean.atividadeProjeto.responsavel}"
										required="true"
										requiredMessage="Campo 'Responsável' obrigatório." />
								</div>

								<div class="ui-g-3 form-group focused">
									<p:outputLabel value="Atividade Planejada" />
									<p:selectOneRadio id="hospedagem"
										value="#{projetoBean.atividadeProjeto.planejado}">
										<f:selectItem itemLabel="Sim" itemValue="true" />
										<f:selectItem itemLabel="Não" itemValue="false" />
									</p:selectOneRadio>


								</div>

							</div>
						</p:panel>

						<div class="ui-g">
							<div class="ui-g-12" style="font-size: 17px; font-weight: bold">Quantidade
								de atividades:</div>
						</div>

						<div class="ui-g">
							<div class="ui-g-1" style="font-size: 17px">Jan</div>
							<div class="ui-g-1" style="font-size: 17px">Fev</div>
							<div class="ui-g-1" style="font-size: 17px">Mar</div>
							<div class="ui-g-1" style="font-size: 17px">Abr</div>
							<div class="ui-g-1" style="font-size: 17px">Mai</div>
							<div class="ui-g-1" style="font-size: 17px">Jun</div>

							<div class="ui-g-1" style="font-size: 17px">Jul</div>
							<div class="ui-g-1" style="font-size: 17px">Ago</div>
							<div class="ui-g-1" style="font-size: 17px">Set</div>
							<div class="ui-g-1" style="font-size: 17px">Out</div>
							<div class="ui-g-1" style="font-size: 17px">Nov</div>
							<div class="ui-g-1" style="font-size: 17px">Dez</div>

						</div>

						<p:panelGrid columns="12" style="width:100%">
							<p:inputNumber required="true"
								value="#{projetoBean.atividadeProjeto.jan}" padControl="false"
								size="1"></p:inputNumber>
							<p:inputNumber required="true"
								value="#{projetoBean.atividadeProjeto.fev}" padControl="false"
								size="1"></p:inputNumber>
							<p:inputNumber required="true"
								value="#{projetoBean.atividadeProjeto.mar}" padControl="false"
								size="1"></p:inputNumber>
							<p:inputNumber required="true"
								value="#{projetoBean.atividadeProjeto.abr}" padControl="false"
								size="1"></p:inputNumber>
							<p:inputNumber required="true"
								value="#{projetoBean.atividadeProjeto.mai}" padControl="false"
								size="1"></p:inputNumber>
							<p:inputNumber required="true"
								value="#{projetoBean.atividadeProjeto.jun}" padControl="false"
								size="1"></p:inputNumber>
							<p:inputNumber required="true"
								value="#{projetoBean.atividadeProjeto.jul}" padControl="false"
								size="1"></p:inputNumber>
							<p:inputNumber required="true"
								value="#{projetoBean.atividadeProjeto.ago}" padControl="false"
								size="1"></p:inputNumber>
							<p:inputNumber required="true"
								value="#{projetoBean.atividadeProjeto.set}" padControl="false"
								size="1"></p:inputNumber>
							<p:inputNumber required="true"
								value="#{projetoBean.atividadeProjeto.out}" padControl="false"
								size="1"></p:inputNumber>
							<p:inputNumber required="true"
								value="#{projetoBean.atividadeProjeto.nov}" padControl="false"
								size="1"></p:inputNumber>
							<p:inputNumber required="true"
								value="#{projetoBean.atividadeProjeto.dez}" padControl="false"
								size="1"></p:inputNumber>

						</p:panelGrid>


					</p:panelGrid>
				</div>

				<div class="botao_central" align="center"
					style="width: 100%; margin: 0px 1px 16px 2px;">
					<p:commandLink styleClass="btn btn-primary btn-sm"
						action="#{projetoBean.salvarAtividade()}"
						update=":form-cadastro-atividade:msg-frontal-atividade"
						style="color:#fff; padding:8px 16px;margin: 2px 2px;"
						value="Salvar" />

					<p:commandLink id="bt-excluir" styleClass="btn btn-danger btn-sm"
						onclick="PF('dlg_cadastro_atividade').hide()" process="@this"
						style="color:#fff;padding:8px 16px; margin: 2px 2px;"
						value="Cancelar">
					</p:commandLink>

				</div>

			</h:form>

			<div
				style="position: absolute; background: whitesmoke; font-family: 'Open Sans'; top: 550px; width: 50%; padding: 24px; text-align: center; margin-left: 25%; border-radius: 16px;">
				<h1>Cadastro de metas</h1>
				<p style="margin-top: 16px; font-size: 16px">Mussum Ipsum,
					cacilds vidis litro abertis. Todo mundo vê os porris que eu tomo,
					mas ninguém vê os tombis que eu levo! Não sou faixa preta cumpadi,
					sou preto inteiris, inteiris. Casamentiss faiz malandris se
					pirulitá. Sapien in monti palavris qui num significa nadis i pareci
					latim.</p>
			</div>
		</p:dialog>

		<p:dialog id="dlg-objetivo" header="Cadastrar Objetivo Específico"
			widgetVar="dlg_cadastro_objetivo" modal="true" resizable="false"
			showEffect="clip" hideEffect="clip" height="100%" width="100%">

			<h:form id="form-cadastro-objetivo">

				<p:messages id="msg-frontal-objetivo" showSummary="false"
					showDetail="true" closable="true" />

				<div class="botao_central" align="left"
					style="margin: 0px 1px 10px 2px;">
					<p:commandLink styleClass="btn btn-primary btn-sm"
						onclick="start()" onsuccess="stop()" onerror="stop()"
						action="#{projetoBean.salvarObjetivo()}"
						process="form-cadastro-objetivo"
						update=" form-cadastro-objetivo:msg-frontal-objetivo"
						style="color:#fff; margin: 2px 2px;" value="Salvar" />
				</div>


				<p:panel id="gridi">
					<div class="ui-g ui-fluid">
						<div class="ui-g-4 form-group focused">
							<p:outputLabel value="Nome:" for="nome" />
							<p:inputText id="nome" value="#{projetoBean.objetivo.nome}"
								required="true" requiredMessage="Campo 'Nome' é obrigatório"
								maxlength="100" />
						</div>

						<div class="ui-g-8 form-group focused">
							<p:outputLabel value="Descrição:" for="descricao_objetivo" />
							<p:inputText cols="30" rows="3" id="descricao_objetivo"
								autoResize="false" maxlength="255"
								value="#{projetoBean.objetivo.descricao}" />
						</div>
					</div>







				</p:panel>
				<p:fieldset legend="Metas" id="metas" toggleable="true">
					<p:dataTable value="#{projetoBean.listaMetasPorObjetivo}"
						var="metas" emptyMessage="Sem Registros!">

						<p:column headerText="Nome" width="120">
							<p:outputLabel value="#{metas.nome}" />
						</p:column>

						<p:column headerText="Descrição">
							<p:outputLabel value="#{metas.descricao}" />
						</p:column>
					</p:dataTable>

				</p:fieldset>
			</h:form>

			<div
				style="position: absolute; background: whitesmoke; font-family: 'Open Sans'; top: 400px; width: 50%; padding: 24px; text-align: center; margin-left: 23%; border-radius: 16px;">
				<h1>Cadastro de Objetivos</h1>
				<p style="margin-top: 16px; font-size: 16px">Mussum Ipsum,
					cacilds vidis litro abertis. Todo mundo vê os porris que eu tomo,
					mas ninguém vê os tombis que eu levo! Não sou faixa preta cumpadi,
					sou preto inteiris, inteiris. Casamentiss faiz malandris se
					pirulitá. Sapien in monti palavris qui num significa nadis i pareci
					latim.</p>
			</div>
		</p:dialog>

		<p:dialog widgetVar="dlg_cadastro_metas" modal="true" width="100%"
			height="100%" closable="true" closeOnEscape="true" showHeader="true"
			header="Inclusão de metas" showEffect="clip" hideEffect="clip">


			<h:form id="form-cadastro-metas">

				<p:messages id="msg-frontal-metas" showSummary="false"
					showDetail="true" closable="true" />

				<div class="botao_central" align="left"
					style="width: 100%; margin: 0px 1px 10px 2px;">
					<p:commandLink styleClass="btn btn-success btn-sm"
						action="#{projetoBean.salvarMetas()}" onclick="start()"
						onsuccess="stop()" onerror="stop()" process="form-cadastro-metas"
						style="color:#fff; margin: 2px 2px;">
						<i class="fa fa-check" aria-hidden="true"></i>
						<span>Salvar</span>
					</p:commandLink>

				</div>

				<p:panel id="panel-form-nova-metas">
					<div class="ui-g ui-fluid default-style-form-filter">
						<div class="ui-g-3 form-group focused">


							<p:outputLabel value="Objetivo:" />
							<p:selectOneMenu value="#{projetoBean.metas.objetivo}"
								required="true" converter="objetivoConv">
								<f:selectItems value="#{projetoBean.listaObjetivos}"
									var="objetivo" itemLabel="#{objetivo.nome}"
									itemValue="#{objetivo}" />
							</p:selectOneMenu>

						</div>

						<div class="ui-g-3 form-group focused">


							<p:outputLabel value="Nome:" for="nome" />
							<p:inputText id="nome" value="#{projetoBean.metas.nome}"
								required="true" requiredMessage="Campo 'Nome' é obrigatório"
								maxlength="100" />

						</div>

						<div class="ui-g-6 form-group focused">


							<p:outputLabel value="Descrição:" for="descricao_metas" />
							<p:inputText id="descricao_metas"
								value="#{projetoBean.metas.descricao}" />

						</div>
					</div>
				</p:panel>

			</h:form>

			<div
				style="position: absolute; background: whitesmoke; font-family: 'Open Sans'; top: 230px; width: 50%; padding: 24px; text-align: center; margin-left: 23%; border-radius: 16px;">
				<h1>Inclusão de metas</h1>
				<p style="margin-top: 16px; font-size: 16px">Mussum Ipsum,
					cacilds vidis litro abertis. Todo mundo vê os porris que eu tomo,
					mas ninguém vê os tombis que eu levo! Não sou faixa preta cumpadi,
					sou preto inteiris, inteiris. Casamentiss faiz malandris se
					pirulitá. Sapien in monti palavris qui num significa nadis i pareci
					latim.</p>
			</div>

		</p:dialog>

		<p:dialog id="dlg-indicador" header="Cadastrar Indicador"
			widgetVar="dlg_cadastro_indicador" modal="true" resizable="false"
			showEffect="clip" hideEffect="clip" height="100%" width="100%">

			<h:form id="form-cadastro-indicador">

				<p:messages id="msg-frontal-indicador" showSummary="false"
					showDetail="true" closable="true" />

				<div class="botao_central" align="left"
					style="width: 100%; margin: 0px 1px 10px 2px;">
					<p:commandLink styleClass="btn btn-success btn-sm"
						onclick="start()" onsuccess="stop()" onerror="stop()"
						action="#{projetoBean.salvarIndicador()}"
						process="form-cadastro-indicador"
						style="color:#fff; margin: 2px 2px;">
						<i class="fa fa-check" aria-hidden="true"></i>
						<span>Salvar</span>
					</p:commandLink>
				</div>

				<p:panel id="gridi-indi">
					<div class="ui-g ui-fluid default-style-form-filter">
						<div class="ui-g-4 form-group focused">
							<p:outputLabel value="Nome:" for="nome" />
							<p:inputText id="nome" value="#{projetoBean.indicador.nome}"
								required="true" requiredMessage="Campo 'Nome' é obrigatório"
								maxlength="100" />
						</div>

						<div class="ui-g-4 form-group focused">
							<p:outputLabel value="Valor de Rerência" for="valorReferencia" />
							<p:inputText id="valorReferencia"
								value="#{projetoBean.indicador.valorReferencia}" maxlength="20" />
						</div>

						<div class="ui-g-4 form-group focused">
							<p:outputLabel value="Peridiocidade:" for="periodicidade" />
							<p:inputText id="periodicidade"
								value="#{projetoBean.indicador.periodicidade}" maxlength="20" />
						</div>

						<div class="ui-g-4 form-group focused">
							<p:outputLabel value="Responsável:" for="responsavel" />
							<p:inputText id="responsavel"
								value="#{projetoBean.indicador.responsavel}" maxlength="50" />
						</div>

						<div class="ui-g-4 form-group focused">
							<p:outputLabel value="Descrição" for="descricao_indicador" />
							<p:inputText id="descricao_indicador" maxlength="255"
								value="#{projetoBean.indicador.descricao}" />
						</div>
					</div>
				</p:panel>


			</h:form>
		</p:dialog>


		<p:confirmDialog header="Aprovação de projeto"
			message="Confirma a aprovação do projeto?"
			widgetVar="dlgAprovacaoProjeto" global="true" showEffect="fade"
			hideEffect="fade">
			<h:form>
				<p:commandButton value="Sim" styleClass="ui-confirmdialog-yes"
					icon="ui-icon-check" action="#{projetoBean.aprovarProjeto()}"
					update="form-cadastro-projeto"
					oncomplete="PF('dlgAprovacaoProjeto').hide()" />
				<p:commandButton value="Não" type="button"
					styleClass="ui-confirmdialog-no" icon="ui-icon-close"
					onclick="PF('dlgAprovacaoProjeto').hide()" />
			</h:form>
		</p:confirmDialog>
	</ui:define>


</ui:composition>