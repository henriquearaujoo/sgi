<!DOCTYPE html>
<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:p="http://primefaces.org/ui"
  xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
  xmlns:jsf="http://xmlns.jcp.org/jsf"
>
  <h:head id="head">
    <title>LogIn</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"
    />
    <script src="https://kit.fontawesome.com/a81368914c.js" />

    <link rel="stylesheet" href="../resources/css/login.css" />
    
    <h:outputScript library="js" name="app.js" target="body" />
    
  </h:head>
  <h:body>
  <p:dialog
        widgetVar="statusDialog"
        modal="true"
        draggable="false"
        closable="false"
        resizable="false"
        showHeader="false"
        style="
          background-color: #ffffff;
          margin-left: 45%;
          margin-right: 50%;
          margin-top: 20%;
        "
      >
        <p:graphicImage library="image" name="aguarde.gif" />
        <p:graphicImage
          style="width: 120px; height: 70px"
          library="image"
          name="logofas.png"
        />
      </p:dialog>
    <h:graphicImage class="wave" value="../resources/images/wave.png" />
    <h:panelGroup layout="block" class="container">
      <h:panelGroup layout="block" class="img">
        <h:graphicImage style="width: 400px margin-right: -15px" id="fas-logo" value="../resources/images/fas1c.png"></h:graphicImage>
      </h:panelGroup>
      <h:panelGroup layout="block" class="login-content">
        <h:form>
          <p:messages
                    id="message-recuperar"
                    showDetail="true"
                    showSummary="false"
                    closable="true"
                  >
                    <p:autoUpdate disabled="true"></p:autoUpdate>
                  </p:messages>
          <h2>Entrar</h2>
          <h:panelGroup layout="block" class="input-div one">
            <h:panelGroup layout="block" class="i">
              <i class="fas fa-user"></i>
            </h:panelGroup>
            <h:panelGroup layout="block" class="div">
              <h5>Usuário</h5>
              <h:inputText class="input" value="#{loginBean.nomeUsuario}" autocomplete="off" required="true"/>
            </h:panelGroup>
          </h:panelGroup>

          <h:panelGroup layout="block" class="input-div pass">
            <h:panelGroup layout="block" class="i">
              <i class="fas fa-lock"></i>
            </h:panelGroup>
            <h:panelGroup layout="block" class="div">
              <h5>Senha</h5>
              <h:inputSecret layout="block" class="input" value="#{loginBean.senhaUsuario}" autocomplete="off"
                    required="true"/>
            </h:panelGroup>
          </h:panelGroup>
          <a href="#" id="forgot">Esqueci a minha senha</a>
          <h:commandButton type="submit" class="btn" value="Entrar" update="message"
                    process="loginform"
                    action="#{loginBean.logar()}"
                    onclick="start()"
                    onerror="stop()"
                    oncomplete="stop()"/>
        </h:form>
      </h:panelGroup>

      <h:panelGroup layout="block" class="forgot-content">
        <h:form>
          
          <h2>Recuperação de senha</h2>
          <h:panelGroup layout="block" class="input-div one">
            <h:panelGroup layout="block" class="i">
              <i class="fas fa-user"></i>
            </h:panelGroup>
            <h:panelGroup layout="block" class="div">
              <h5>Digite seu email</h5>
              <h:inputText class="input" autocomplete="off" value="#{loginBean.toEmail}" required="true"/>
            </h:panelGroup>
          </h:panelGroup>
          <h:commandButton type="submit" 
          				   class="btn" 
          				   value="Recuperar senha" 
          				   onclick="start();"
                    	   onerror="stop();"
                    	   oncomplete="stop();"
                    	   process="signupform"
                    		action="#{loginBean.recuperarNovaSenha()}"
                    		update="message-recuperar"
          				   />
        </h:form>
      </h:panelGroup>
    </h:panelGroup>

    <script type="text/javascript">
      const inputs = document.querySelectorAll(".input");
      const forgotInput = document.getElementById("forgot");
      const forgotContent =
        document.getElementsByClassName("forgot-content")[0];
      const loginContent = document.getElementsByClassName("login-content")[0];

      forgotInput.onclick = function (e) {
        e.preventDefault();
        console.log("salve");
        forgotContent.style.display = "flex";
        loginContent.style.position = "absolute";
        loginContent.style.display = "none";
      };

      function addcl() {
        let parent = this.parentNode.parentNode;
        parent.classList.add("focus");
      }

      function remcl() {
        let parent = this.parentNode.parentNode;
        if (this.value == "") {
          parent.classList.remove("focus");
        }
      }

      inputs.forEach((input) => {
        input.addEventListener("focus", addcl);
        input.addEventListener("blur", remcl);
      });
    </script>
  </h:body>
</html>