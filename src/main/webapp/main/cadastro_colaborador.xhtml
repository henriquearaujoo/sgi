<!DOCTYPE html>
<ui:composition template="/WEB-INF/LayoutFullPage.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:jsf="http://xmlns.jcp.org/jsf" xmlns:o="http://omnifaces.org/ui">

	<ui:define name="content">
		<f:metadata>
			<f:viewAction action="#{colaboradorController.initListagem()}" />
		</f:metadata>

		<script type="text/javascript">
				function start() {
				    PF('statusDialog').show();
				}
				 
				function stop() {
				    PF('statusDialog').hide();
				}
				
				function stopDlgfilter() {
				    PF('dlg_filtro_compra').hide();
				}
			</script>
		<div class="container-fluid mb-3">
			<p:breadCrumb styleClass="my-3 px-3 py-2">
				<p:menuitem value="Home" url="home_new.xhtml" />
				<p:menuitem value="Listagem de Colaboradores"
					url="cadastro_colaborador.xhtml" />
			</p:breadCrumb>
			<h:form id="content_colaborador">
				<p:panel header="Listagem de Colaboradores" toggleable="true">
					<h5>Filtros</h5>

					<p:separator />
					<p:panelGrid columns="4" styleClass="ui-noborder">
							
						
						<h:outputText value="Nome" />
						<p:inputText placeholder="Nome do Colaborador"
							value="#{colaboradorController.filtro.nomeColaborador}" size="40" />


						<h:outputText value="CPF: " />
						<p:inputMask value="#{colaboradorController.filtro.CPF}"
							placeholder="Digite o CPF" size="40" mask="999.999.999-99" />


						<h:outputText value="Gestão:" />
						<p:autoComplete size="40"
							value="#{colaboradorController.filtro.gestaoColaborador}"
							placeholder="Gestão do Colaborador"
							completeMethod="#{colaboradorController.completeGestao}"
							var="gestao" itemLabel="#{gestao.nome}" itemValue="#{gestao}"
							converter="gestaoConverter" />

						<h:outputText value="Data de Nascimento:  " />
						<p:calendar size="40" placeholder="Data de Nasc. do Colaborador"
							mask="true"
							value="#{colaboradorController.filtro.dataNascimento}"
							navigator="true" pattern="dd/MM/yyyy" />
					</p:panelGrid>
					<h:panelGroup>

						<div class="row mt-3">
							<div class="col">
								<p:commandLink styleClass="btn btn-primary"
									action="#{colaboradorController.filtrar()}" onclick="start()"
									onsuccess="stop()" onerror="stop()" update="tabela_colaborador">
									<i class="fa fas fa-search"></i>
						Procurar
					</p:commandLink>
								<p:link styleClass="btn btn-success"
									outcome="/main/cadastro_colaborador_novo"
									title="Adicionar novo">
									<i class="fa fas fa-plus"></i> Novo
					</p:link>
								<p:commandLink styleClass="btn btn-outline-dark" title="Limpar"
									process="@this" onstart="start()" onsuccess="stop()"
									onerror="stop()" action="#{colaboradorController.limpar()}"
									update=":content_colaborador">
									<i class="fa fa-eraser"></i> Limpar
					</p:commandLink>
							</div>
						</div>
					</h:panelGroup>
				</p:panel>
				<h:panelGrid styleClass="ui-fluid">
					<p:dataTable id="tabela_colaborador" paginator="true" rows="12"
						value="#{colaboradorController.listaColaborador}"
						var="colaborador">
						<p:column headerText="NOME" filterBy="#{colaborador.nome}"
							filterMatchMode="contains">
							<p:link outcome="/main/cadastro_colaborador_novo"
								value="#{colaborador.nome}">
								<f:param name="id" value="#{colaborador.id}" />
							</p:link>
						</p:column>
						<p:column headerText="RG" filterBy="#{colaborador.rg}"
							filterMatchMode="contains">
							<h:outputText value="#{colaborador.rg}" />
						</p:column>
						<p:column headerText="PIS" filterBy="#{colaborador.pis}"
							filterMatchMode="contains">
							<h:outputText value="#{colaborador.pis}" />
						</p:column>
						<p:column headerText="Cargo" filterBy="#{colaborador.cargo.nome}"
							filterMatchMode="contains">
							<h:outputText value="#{colaborador.cargo.nome}" />
						</p:column>
						<p:column headerText="EMAIL" filterBy="#{colaborador.email}"
							filterMatchMode="contains">
							<h:outputText value="#{colaborador.email}" />
						</p:column>
						<p:column headerText="CPF" filterBy="#{colaborador.cpf}"
							filterMatchMode="contains">
							<h:outputText value="#{colaborador.cpf}" />
						</p:column>
					</p:dataTable>
				</h:panelGrid>
			</h:form>
		</div>
	</ui:define>
	<ui:define name="adicionais">
		<p:dialog modal="true" style="z-index:1000" widgetVar="statusDialog"
			showHeader="false" draggable="false" closable="false"
			resizable="false">
			<p:graphicImage library="image" name="aguarde.gif" />
			<p:graphicImage style="width:120px;height:70px" library="image"
				name="logofas.png" />
		</p:dialog>
	</ui:define>



</ui:composition>