<!DOCTYPE html>
<ui:composition template="/WEB-INF/LayoutFullPage.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:jsf="http://xmlns.jcp.org/jsf" xmlns:o="http://omnifaces.org/ui">

	<ui:define name="content">




		<div class="container-fluid mb-3">
			<f:metadata>
				<f:viewAction action="#{panelManagement.execute()}" />
			</f:metadata>

			<h:form id="content" styleClass="default-style-form-filter">

				<script
					src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@0.5.0"></script>




				<script type="text/javascript">
	             function chartExtender() {

	               var options = $.extend(true, {}, this.cfg.config);
	               options = {
	            	  plugins: [ChartDataLabels],
	                  options: {
	                      legend: {
	                         display: true,
	                      },
	                      plugins: {
	                          datalabels: {
	                            color: '#36A2EB',
	                            align: 'right',
	                            font: {
		                            size: '14'
		                            }
	                          }
	                        },
	                    },
	                    data: {
	                        datasets: [{
	                          datalabels: {
	                            color: '#000000'
	                          },
	                          data: this.cfg.config.data.datasets[0].data.map(item => item.toFixed(0))
	                        }, 
	                        {
		                      datalabels: {
		                            color: '#000000'
		                          }
		                       }
	                        ]
	                      },

	                      
	               };
	               $.extend(true, this.cfg.config, options);

	               //console.log(this.cfg.config);
	            };

	            function evolutionExtender() {
		               var chart = $.extend(true, {}, this.cfg.config);
		               chart = {
		 	            	  //plugins: [ChartDataLabels],
		 	                  options: {
			 	                  animation:{duration: 1500},
		 	                      legend: {
		 	                         display: true,
		 	                      },
								  
		 	                      
		 	                      plugins: {
		 	                          datalabels: {
		 	                            color: '#000',
		 	                            align: 'left',
		 	                            font: {
		 		                            size: '18'
		 		                            }
		 	                          }
		 	                        },
		 	                        
		 	                    },
		 	                    /* data: {
									datasets:[, {
                                         data: [15, 30]   
										}]
			 	                    } */
		 	               };

		               
		               $.extend(true, this.cfg.config, chart);
		               console.log(this.cfg.config);
		            };

	           </script>

				<p:breadCrumb>
					<p:menuitem value="Home" url="home_new.xhtml" />
					<p:menuitem value="Painel do gestor" url="#" />
				</p:breadCrumb>

				<div class="ui-g ui-fluid">

					<div class="ui-g-8" style="text-align: center;">
						<h3>Evolução Financeira</h3>
						<div>
							<p:barChart model="#{panelManagement.evolutionFinanceModel}"
								style="width: 100%; height: 400px;" />
						</div>
					</div>

					<div class="ui-g-4" style="text-align: center;">
						<h3>Poercentagem de execução</h3>
						<div style="margin-top: 60px">
							<p:knob value="70" id="knob" foregroundColor="#188826cf"
								width="325" height="325" disabled="true"
								labelTemplate="{value}%" max="100">
							</p:knob>
						</div>
					</div>


					<div class="ui-g-8" style="text-align: center;">
						<h3>Fontes/Parceiros da Gestão</h3>
						<div>
							<p:barChart model="#{panelManagement.hbarModel}"
								style="width: 100%; height: 400px;" />
						</div>
					</div>

					<div class="ui-g-4" style="text-align: center;">
						<h3>Status de pagamento</h3>
						<div style="margin-top: 60px">
							<p:pieChart model="#{panelManagement.pieModel}"
								style="width: 100%; height: 350px;" />
						</div>

					</div>


				</div>


			</h:form>
		</div>
	</ui:define>

	<ui:define name="adicionais">
		<p:dialog modal="true" style="z-index:1000" widgetVar="statusDialog"
			showHeader="false" draggable="false" closable="false"
			resizable="false">
			<p:graphicImage library="image" name="aguarde.gif" />
			<p:graphicImage style="width:120px;height:70px" library="image"
				name="logofas.png" />
		</p:dialog>
	</ui:define>

</ui:composition>