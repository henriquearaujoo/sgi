<!DOCTYPE html>
<ui:composition template="/WEB-INF/LayoutFullPage.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:jsf="http://xmlns.jcp.org/jsf" xmlns:o="http://omnifaces.org/ui">


	<ui:define name="content">

		<h:form acceptcharset="ISO-8859-1" id="form-cadastro-viagem"
			prependId="false">

			<p:messages id="messages" showSummary="false" style="margin-top:10px"
				showDetail="true" closable="true" showIcon="true">
				<p:autoUpdate />
			</p:messages>

			<f:metadata>
				<o:viewParam name="viagem" value="#{sv_cadastro_controller.viagem}" />
				<f:viewAction action="#{sv_cadastro_controller.init()}"
					onPostback="setarFocused('info-geral');" />
			</f:metadata>

			<p:breadCrumb>
				<p:menuitem value="Categories" url="home_new.xhtml" />
				<p:menuitem value="Solicitação de Viagem"
					url="SolicitacaoViagem.xhtml" />
				<p:menuitem value="Cadastro de viagem" />
			</p:breadCrumb>

			<div id="steps">
				<p:steps widgetVar="tabViewVar" rendered="true" id="step"
					activeIndex="#{sv_cadastro_controller.stepIndex}"
					styleClass="custom" style="margin-bottom:10px" readonly="false">
					<p:menuitem value="Informações gerais" />
					<p:menuitem value="Diárias" />
					<p:menuitem value="Programação" />
					<p:menuitem value="Despesas" />
					<p:menuitem value="Confirmação" />
				</p:steps>
			</div>

			<div id="panel-geral">

				<p:panel id="panel-info-geral" styleClass="tab-menu-item-vi">

					<ui:include src="/main/viagem/info_geral.xhtml" />

				</p:panel>

				<p:panel id="panel-info-diaria" styleClass="tab-menu-item-vi"
					style="display: none;">

					<p:outputPanel id="cadastro_diaria">
						<div id="info-diaria" class="ui-g ui-fluid">

							<ui:include src="/main/viagem/diarias.xhtml" />

						</div>
					</p:outputPanel>

				</p:panel>

				<p:panel id="panel-info-programacao" style="display: none"
					styleClass="tab-menu-item-vi">

					<div id="info-prorgramacao" class="ui-g ui-fluid">

						<ui:include src="/WEB-INF/sv03.xhtml" />

					</div>

				</p:panel>

				<p:panel id="panel-info-despesas" style="display: none"
					styleClass="tab-menu-item-vi">

					<div id="info-despesas" class="ui-g ui-fluid">

						<ui:include src="/WEB-INF/sv04.xhtml" />

					</div>

				</p:panel>


				<p:panel id="panel-info-confirmacao" styleClass="tab-menu-item-vi"
					style="display: none">
					<div id="info-confirmacao" class="tab-menu-item-vi"></div>
				</p:panel>
			</div>

			<div class="fixed-btn">

				<p:panel id="btn-panel-p">

					<div id="btn-panel-wizard" class="ui-g ui-fluid"
						style="margin-bottom: 10px">


						<div class="ui-g-6">

							<p:commandLink styleClass="btn btn-primary"
								action="#{sv_cadastro_controller.salvarViagem()}"
								onclick="start()" onsuccess="stop()" onerror="stop()"
								oncomplete="PF('dlg_escolha_page').show();"
								rendered="#{sv_cadastro_controller.podeEditar}"
								style="color:#fff; margin: 2px 2px;">
								<span class="glyphicon glyphicon-floppy-disk"></span>
								<span style="margin: 3px;">Salvar</span>
							</p:commandLink>


							<p:commandLink onclick="start()" onsuccess="stop()"
								onerror="stop()"
								rendered="#{sv_cadastro_controller.viagem.id != null and sv_cadastro_controller.podeEditar}"
								action="#{sv_cadastro_controller.autorizar()}"
								styleClass="btn btn-success btn-sm"
								style="color:#fff; margin: 2px 2px;">
								<p:confirm header="Confirmação" message="Autorizar solicitação?"
									icon="ui-icon-alert" />
								<span class="glyphicon glyphicon-ok"></span>
								<span style="margin: 3px;">Autorizar</span>
							</p:commandLink>

							<p:commandLink
								rendered="#{sv_cadastro_controller.viagem.id != null}"
								styleClass="btn btn-default btn-sm" ajax="false" process="@this"
								target="_blank"
								action="#{sv_cadastro_controller.gerarRelatorioViagem()}"
								style="color:#000; margin: 2px 2px;">
								<span class="glyphicon glyphicon-print"></span>
								<span style="margin: 3px;">Imprimir</span>
							</p:commandLink>


						</div>

						<div class="ui-g-6" style="text-align: right">

							<p:commandLink id="btn-back" styleClass="btn btn-primary"
								update="step, btn-back, btn-next, btn-panel-p" value="Voltar"
								process="@this"
								onclick="steping(#{sv_cadastro_controller.stepIndex - 1});start()"
								oncomplete="stop()" onerror="stop()"
								action="#{sv_cadastro_controller.steping('back')}"></p:commandLink>

							<p:commandLink id="btn-next" styleClass="btn btn-primary"
								update="step, btn-back, btn-next, btn-panel-p" value="Próximo"
								onclick="steping(#{sv_cadastro_controller.stepIndex + 1});start()"
								oncomplete="stop()" onerror="stop()" process="@this"
								action="#{sv_cadastro_controller.steping('next')}"></p:commandLink>


						</div>

						<div id="actions-button" class="ui-g-12" style="display: none">

							<div class="ui-g-12" style="text-align: right;"></div>
						</div>

					</div>

				</p:panel>
			</div>

			<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
				<p:commandButton value="Sim" styleClass="ui-confirmdialog-yes"
					icon="pi pi-check" />
				<p:commandButton value="Não" styleClass="ui-confirmdialog-no"
					icon="pi pi-times" />
			</p:confirmDialog>



		</h:form>

	</ui:define>

	<ui:define name="adicionais">


		<script type="text/javascript">
			function setarWidthHeight(id) {
				var htmlTag = document.getElementById(id);
				htmlTag.style.height = Math.floor(window.innerHeight*0.98)+"px";	
				htmlTag.style.width = Math.floor(window.innerWidth*0.98)+"px";	
				
			}
		</script>



		<p:dialog modal="true" style="z-index:1000" widgetVar="statusDialog"
			showHeader="false" draggable="false" closable="false"
			resizable="false">
			<p:graphicImage library="image" name="aguarde.gif" />
			<p:graphicImage style="width:120px;height:70px" library="image"
				name="logofas.png" />
		</p:dialog>


		<p:dialog widgetVar="dlg-recurso" modal="true" width="100%"
			height="100%" closable="true" closeOnEscape="true" showHeader="true"
			header="Inclusão de recursos para pagamento" showEffect="clip"
			hideEffect="clip">

			<h:form id="form-dialog-recurso" prependId="false">

				<p:panel id="panel-form-recurso">

					<div class="ui-g ui-fluid"></div>

				</p:panel>

			</h:form>

		</p:dialog>


		<p:dialog widgetVar="dlg-nova-diaria" modal="true" width="100%"
			height="100%" closable="true" closeOnEscape="true" showHeader="true"
			header="Inclusão de diária" showEffect="clip" hideEffect="clip">

			<h:form id="form-dialog-diaria" prependId="false">

				<p:panel id="panel-form-nova-diaria">

					<div class="ui-g ui-fluid">

						<div class="ui-g-12">
							<p:messages showSummary="false" showDetail="true" closable="true"
								escape="true">
								<p:autoUpdate></p:autoUpdate>
							</p:messages>
						</div>


						<div class="ui-g-3 form-group focused">


							<p:outputLabel value="Profissional:" for="fornecedor_diaria" />
							<p:autoComplete id="fornecedor_diaria"
								value="#{sv_cadastro_controller.diaria.contaRecebedor}"
								completeMethod="#{sv_cadastro_controller.completeContaColaborador}"
								var="fornecedor" itemLabel="#{fornecedor.nomeConta}"
								itemValue="#{fornecedor}" converter="contaConverter"
								forceSelection="true" />

						</div>

						<div class="ui-g-3 form-group focused">

							<p:outputLabel value="Data de pagamento:"
								for="dt_pagamento_diaria" />
							<p:calendar id="dt_pagamento_diaria"
								value="#{sv_cadastro_controller.diaria.dataVencimento}"
								size="10" style="font-size:12px" timeZone="America/Manaus"
								navigator="true" pattern="dd/MM/yyyy" />

						</div>

						<div class="ui-g-3 form-group focused">

							<p:outputLabel value="Dias em campo" />
							<p:inputText value="#{sv_cadastro_controller.diaria.diasnocampo}"
								style="font-size:12px;width:30px" />

						</div>

						<div class="ui-g-3">
							<h:outputText value="Hospedagem Custeada pela FAS ?"
								style="font-size:12px" />
							<p:selectOneRadio id="hospedagem"
								value="#{sv_cadastro_controller.diaria.hospedagem}">
								<f:selectItem itemLabel="Sim" itemValue="true" />
								<f:selectItem itemLabel="Não" itemValue="false" />
								<p:ajax
									listener="#{sv_cadastro_controller.limpaValoresDiaria()}" />
							</p:selectOneRadio>

						</div>



						<div class="ui-g-12 form-group focused">
							<p:outputLabel value="DIÁRIA INTEIRA:" style="font-weight:bold" />
						</div>

						<div class="ui-g-4 form-group focused">
							<p:outputLabel value="Quantidade:" for="qtd_integral" />
							<p:inputText id="qtd_integral"
								disabled="#{sv_cadastro_controller.diaria.hospedagem}"
								value="#{sv_cadastro_controller.diaria.quantidadeIntegral}">
								<f:convertNumber minFractionDigits="0" />
								<f:ajax event="blur"
									listener="#{sv_cadastro_controller.atualizaTotalIntegral()}"
									render="totalIntegral" />
							</p:inputText>

						</div>


						<div class="ui-g-4 form-group focused">
							<p:outputLabel value="Valor" for="vl_integral" />
							<p:inputText id="vl_integral"
								disabled="#{sv_cadastro_controller.diaria.hospedagem}"
								value="#{sv_cadastro_controller.diaria.valorIntegral1}"
								onkeydown="mascaraMoeda(this,moeda);">
								<f:convertNumber minFractionDigits="2" maxFractionDigits="2"
									locale="pt_BR" />
								<f:ajax event="blur"
									listener="#{sv_cadastro_controller.atualizaTotalIntegral()}"
									render="totalIntegral" />
							</p:inputText>

						</div>


						<div class="ui-g-4 form-group focused">
							<p:outputLabel value="Total: R$" for="totalIntegral" />
							<p:inputText id="totalIntegral"
								onkeydown="mascaraMoeda(this,moeda);"
								disabled="#{sv_cadastro_controller.diaria.hospedagem}"
								value="#{sv_cadastro_controller.diaria.totalIntegral1}">
								<f:convertNumber minFractionDigits="2" maxFractionDigits="2"
									locale="pt_BR" />

							</p:inputText>
						</div>



						<div class="ui-g-12">
							<p:outputLabel value="MEIA DIÁRIA:" style="font-weight:bold" />
						</div>

						<div class="ui-g-4 form-group focused">
							<p:outputLabel value="Quantidade" for="qtd_meia" />
							<p:inputText id="qtd_meia"
								value="#{sv_cadastro_controller.diaria.quantidadeParcial}">
								<f:convertNumber minFractionDigits="0" />
								<f:ajax event="blur"
									listener="#{sv_cadastro_controller.atualizaTotalParcial()}"
									render="totalParcial" />
							</p:inputText>
						</div>



						<div class="ui-g-4 form-group focused">
							<p:outputLabel value="Valor: R$" for="vl_parcial" />
							<p:inputText id="vl_parcial"
								value="#{sv_cadastro_controller.diaria.valorParcial1}"
								onkeydown="mascaraMoeda(this,moeda);">
								<f:convertNumber minFractionDigits="2" maxFractionDigits="2"
									locale="pt_BR" />
								<f:ajax event="blur"
									listener="#{sv_cadastro_controller.atualizaTotalParcial()}"
									render="totalParcial" />
							</p:inputText>

						</div>


						<div class="ui-g-4 form-group focused">
							<p:outputLabel value="Total: R$" for="totalParcial" />
							<p:inputText id="totalParcial" style="font-size:12px;width:85px"
								onkeydown="mascaraMoeda(this,moeda);"
								value="#{sv_cadastro_controller.diaria.totalParcial1}">
								<f:convertNumber minFractionDigits="2" maxFractionDigits="2"
									locale="pt_BR" />

							</p:inputText>

						</div>



						<div class="ui-g-12 form-group focused">
							<h:outputText value="Motivo/Descrição: " />
							<p:inputText value="#{sv_cadastro_controller.diaria.descricao}" />
						</div>

						<div class="ui-g-12 form-group focused">
							<p:commandLink styleClass="btn btn-primary btn-sm" type="button"
								action="#{sv_cadastro_controller.salvarDiaria()}"
								onclick="start()" onsuccess="stop()" onerror="stop()"
								rendered="#{sv_cadastro_controller.podeEditar}"
								style="color:#fff; margin: 2px 2px;">
								<span class="glyphicon glyphicon-floppy-disk"></span>
								<span style="margin: 3px;">Salvar</span>
							</p:commandLink>

							<p:commandLink styleClass="btn btn-primary btn-sm"
								onclick="setarWidthHeight('form-dialog-recurso');start()"
								onerror="stop()" style="margin-left:5px"
								title="Recurso R$" update="panel-form-recurso"
								process="@this" oncomplete="PF('dlg-recurso').show();stop()">
								<i class="pi pi-check"></i>
								<span style="margin: 3px;">Recursos</span>
							</p:commandLink>

						</div>

					</div>

				</p:panel>
			</h:form>

		</p:dialog>

		<p:dialog widgetVar="dlg_impressao" modal="true" closable="true"
			showHeader="false" showEffect="clip" hideEffect="clip">
			<h:form id="form-dialog">
				<p:panelGrid>
					<p:row>
						<p:column colspan="2">
							<div align="center" style="padding: 20px">
								<h:outputText value="Gerar diária?" />
							</div>
						</p:column>
					</p:row>

					<p:row>
						<p:column>
							<p:commandLink value="Sim"
								styleClass="btn btn-default btn-success"
								oncomplete="PF('dlg_impressao').hide();" style="color:#fff"
								action="#{sv_cadastro_controller.geraRelatorioDiaria()}"
								ajax="false" process="@this" target="_blank">
								<span class="glyphicon glyphicon-ok"></span>
							</p:commandLink>
						</p:column>

						<p:column>
							<p:commandLink styleClass="btn btn-default btn-danger"
								style="color:#fff" value="Não"
								onclick="PF('dlg_impressao').hide();PF('statusDialog').hide();">
								<span class="glyphicon glyphicon-remove"></span>
							</p:commandLink>
						</p:column>

					</p:row>

				</p:panelGrid>

			</h:form>
		</p:dialog>


		<p:dialog widgetVar="dlg_lanc_acao" modal="true" width="65%"
			closable="true" closeOnEscape="true" showHeader="true"
			showEffect="clip" hideEffect="clip">

			<h:form id="form_lanc_acao">
				<p:outputPanel id="lancamento_acao" style="width:100%">
					<p:messages id="msg_lancamento_acao" showDetail="true"
						showSummary="false" closable="true" />

					<p:panelGrid columns="2" style="width:100%">
						<p:panelGrid id="recursoLinha" columns="2">

							<h:outputText value="Projetos:" />
							<p:selectOneMenu value="#{sv_cadastro_controller.projetoAux}"
								style="width:180px" filter="true" filterMatchMode="contains"
								converter="projetoConverter">
								<f:selectItem noSelectionOption="true" />
								<f:selectItems value="#{sv_cadastro_controller.listaProjeto}"
									var="projeto" itemLabel="#{projeto.nome}"
									itemValue="#{projeto}" />
								<p:ajax update="recursoLinha" onstart="start()" onerror="stop()"
									onsuccess="stop()"
									listener="#{sv_cadastro_controller.listaRubricasAndAtividades()}" />
							</p:selectOneMenu>

							<h:outputText value="Linha orçamentária:" />

							<p:selectOneMenu id="cate_compra" style="width:180px"
								placeholder="Entre com o código/nome do projeto." size="25"
								value="#{sv_cadastro_controller.lancamentoAcao.projetoRubrica}"
								filter="true" filterMatchMode="contains" var="categoria"
								converter="projetoRubricaConverter">

								<f:selectItems
									value="#{sv_cadastro_controller.listaDeRubricasProjeto}"
									var="ru" itemLabel="#{ru.nomeCategoria}" itemValue="#{ru}" />


								<p:column headerText="Código">
									<h:outputText value="#{categoria.codigo}" />
								</p:column>

								<p:column headerText="Fonte">
									<h:outputText value="#{categoria.nomeFonte}" />
								</p:column>

								<p:column headerText="Projeto">
									<h:outputText value="#{categoria.nomeProjeto}" />
								</p:column>

								<p:column headerText="Componente">
									<h:outputText value="#{categoria.nomeComponente}" />
								</p:column>

								<p:column headerText="SubComponente">
									<h:outputText value="#{categoria.nomeSubComponente}" />
								</p:column>

								<p:column headerText="Linha orçamentária">
									<h:outputText value="#{categoria.nomeCategoria}" />
								</p:column>

								<p:column headerText="Saldo">
									<h:outputText value="#{categoria.valorSaldo}">
										<f:convertNumber currencySymbol="R$:" minFractionDigits="2"
											maxFractionDigits="2" locale="pt_BR" />
									</h:outputText>
								</p:column>


							</p:selectOneMenu>

							<h:outputText value="Atividades:  " rendered="false" />

							<p:selectOneMenu id="listaAtividades" style="width:180px"
								rendered="false" size="25" converter="atividadeProjetoConverter"
								value="#{sv_cadastro_controller.lancamentoAcao.atividade}"
								filter="true" filterMatchMode="contains" var="atividade">

								<f:selectItems value="#{sv_cadastro_controller.listaAtividades}"
									var="at" itemLabel="#{at.nome}" itemValue="#{at}" />


								<p:column headerText="Nome">
									<p:outputLabel value="#{atividade.nome}" />
								</p:column>

								<p:column headerText="Total">
									<p:outputLabel value="#{atividade.valor}">
										<f:convertNumber currencySymbol="R$:" minFractionDigits="2"
											maxFractionDigits="2" locale="pt_BR" />
									</p:outputLabel>
								</p:column>

								<p:column headerText="Saldo">
									<p:outputLabel value="#{atividade.saldo}">
										<f:convertNumber currencySymbol="R$:" minFractionDigits="2"
											maxFractionDigits="2" locale="pt_BR" />
									</p:outputLabel>
								</p:column>



							</p:selectOneMenu>



							<h:outputText value="Valor:" />
							<p:inputText onkeypress="return formatarNumero(this,event,19,2);"
								placeholder="valor"
								value="#{sv_cadastro_controller.lancamentoAcao.valor}">
								<f:convertNumber minFractionDigits="2" maxFractionDigits="2"
									locale="pt_BR" />

							</p:inputText>


							<h:outputText value="::" />
							<p:commandLink styleClass="btn btn-primary btn-sm"
								onclick="start()" onerror="stop()" oncomplete="stop()"
								process=":form_lanc_acao" update=":form_lanc_acao"
								action="#{sv_cadastro_controller.adicionarNovaAcao()}"
								style="color:#fff; margin: 2px 2px;" value="Adicionar" />


						</p:panelGrid>


						<p:panelGrid columns="2">

							<h:outputText value="Total da diária:" />
							<p:outputLabel value="#{sv_cadastro_controller.totalDeDiarias}">
								<f:convertNumber locale="pt_BR" type="currency" />
							</p:outputLabel>
						</p:panelGrid>

					</p:panelGrid>

				</p:outputPanel>


				<p:dataTable id="tab_lanc_acao" var="lac_acao" paginator="true"
					rows="2" rowIndexVar="indexRow"
					value="#{sv_cadastro_controller.diaria.lancamentosAcoes}">

					<p:column headerText="Código">
						<h:outputText value="#{lac_acao.projetoRubrica.projeto.codigo}" />
					</p:column>

					<p:column headerText="Projeto">
						<h:outputText value="#{lac_acao.projetoRubrica.projeto.nome}" />
					</p:column>

					<p:column headerText="Doação">
						<h:outputText
							value="#{lac_acao.projetoRubrica.rubricaOrcamento.orcamento.titulo}" />
					</p:column>

					<p:column headerText="Categoria">
						<h:outputText
							value="#{lac_acao.projetoRubrica.rubricaOrcamento.rubrica.nome}" />
					</p:column>

					<p:column headerText="Atividade">
						<h:outputText value="#{lac_acao.atividade.nome}" />
					</p:column>



					<p:column headerText="Valor" style="width:100px">
						<h:outputText value="#{lac_acao.valor}">
							<f:convertNumber type="currency" maxFractionDigits="2"
								currencySymbol="R$" />
						</h:outputText>
					</p:column>

					<p:column style="width:50px;">
						<p:commandLink style="color:#FFF"
							styleClass="btn btn-danger btn-xs"
							action="#{sv_cadastro_controller.removerAcao(lac_acao)}"
							rendered="#{pagamentoController.poderEditar()}"
							update="tab_lanc_acao">
							<span class=" glyphicon glyphicon-remove-circle"></span>
						</p:commandLink>
					</p:column>

					<p:columnGroup type="footer">
						<p:row>
							<p:column colspan="5" footerText="TOTAL DE RECURSO: "
								style="text-align:right" />
							<p:column style="text-align:right"
								footerText="#{sv_cadastro_controller.buscarValorTotalRecurso()}" />
							<p:column></p:column>
						</p:row>
					</p:columnGroup>

				</p:dataTable>

			</h:form>
		</p:dialog>


		<p:dialog widgetVar="dlg_trechos" modal="true" width="65%"
			header="Trechos" closable="true" closeOnEscape="true"
			showHeader="true" showEffect="clip" hideEffect="clip">
			<h:form id="cadastro_trecho">
				<p:panelGrid columns="2">

					<h:outputText value="Origem:" style="font-size:12px" />
					<p:autoComplete styleClass="font12-vi" size="45"
						panelStyle="width:180px" placeholder="Origem"
						value="#{sv_cadastro_controller.trecho.origem}"
						completeMethod="#{sv_cadastro_controller.completeLocalidade}"
						var="cidade" itemLabel="#{cidade.nome}" itemValue="#{cidade}"
						converter="localConverterVI" minQueryLength="3" />

					<h:outputText value="Destino: " style="font-size:12px" />
					<p:autoComplete styleClass="font12-vi" size="45"
						panelStyle="width:180px" placeholder="Destino"
						value="#{sv_cadastro_controller.trecho.destino}"
						completeMethod="#{sv_cadastro_controller.completeLocalidade}"
						var="cidade" itemLabel="#{cidade.nome}" itemValue="#{cidade}"
						converter="localConverterVI" minQueryLength="3" />

					<h:outputText value="Data: " style="font-size:12px" />
					<p:calendar id="datetime"
						value="#{sv_cadastro_controller.trecho.data}"
						imeZone="America/Manaus" navigator="true" pattern="dd/MM/yyyy"
						style="font-size:12px" />


					<h:outputText value="Fornecedor do transporte: "
						style="font-size:12px" />
					<p:autoComplete id="empresa" required="true" style="font-size:12px"
						placeholder="Fornecedor"
						requiredMessage="Preencha o campo Fornecedor" size="40"
						value="#{sv_cadastro_controller.trecho.empresa}"
						completeMethod="#{sv_cadastro_controller.completeFornecedor}"
						var="fornecedor" itemLabel="#{fornecedor.nomeFantasia}"
						itemValue="#{fornecedor}" converter="fornecedorConverter"
						forceSelection="true" />

					<p:commandLink update="cadastro_trecho" style="color:#fff"
						action="#{sv_cadastro_controller.limparTrecho()}" process="@this"
						value="Limpar" styleClass="btn btn-block">
						<span class="glyphicon glyphicon-trash"> </span>
					</p:commandLink>

					<p:commandLink styleClass="btn btn-block" process="cadastro_trecho"
						update="cadastro_trecho"
						action="#{sv_cadastro_controller.addTrecho()}" style="color:#fff;"
						value="Adicionar">
						<span class="glyphicon glyphicon-plus"> </span>
					</p:commandLink>

				</p:panelGrid>

				<p:dataTable id="table-trechos"
					value="#{sv_cadastro_controller.diaria.trecho}" var="trecho"
					rowIndexVar="indexRow">
					<f:facet name="header">
						<h:outputText value="Trechos" />
					</f:facet>

					<p:column headerText="Data" style="width:90px;font-size:12px">
						<h:outputText value="#{trecho.data}" style="font-size:12px">
							<f:convertDateTime pattern="dd/MM/yyyy" timeZone="America/Manaus" />
						</h:outputText>
					</p:column>

					<p:column headerText="Empresa" style="width:30%;font-size:12px">
						<h:outputText value="#{trecho.empresa.nomeFantasia}" />
					</p:column>

					<p:column headerText="Origem" style="width:30%;font-size:12px">
						<h:outputText value="#{trecho.origem.mascara}"
							style="font-size:12px" />
					</p:column>

					<p:column headerText="Destino:" style="width:30%;font-size:12px">
						<h:outputText value="#{trecho.destino.mascara}"
							style="font-size:12px" />
					</p:column>


					<p:column style="width:110px">

						<p:commandLink process="@this" update="cadastro_trecho"
							action="#{sv_cadastro_controller.prepararEdicaoTrecho(indexRow)}">
							<span style="margin-right: 3px; font-size: 12px"
								class="fa fa-pencil"></span>editar				
							<f:setPropertyActionListener value="#{trecho}"
								target="#{sv_cadastro_controller.trecho}" />
						</p:commandLink>

					</p:column>

					<p:column style="width:110px">
						<p:commandLink
							action="#{sv_cadastro_controller.removerTrecho(indexRow)}"
							process="@this" update="table-trechos"
							onclick="PrimeFaces.monitorDownload(start, stop);">
							<span style="margin-right: 3px" class="fa fa-times"></span>excluir				
						</p:commandLink>
					</p:column>

				</p:dataTable>

			</h:form>

		</p:dialog>


		<p:dialog widgetVar="dlg_escolha_page" modal="true" closable="true"
			showHeader="false" showEffect="clip" hideEffect="clip">

			<h:form>
				<p:panelGrid>
					<p:row>
						<p:column colspan="2">
							<div align="center" style="padding: 20px">
								<h:outputText value="Finalizar processo?" />
							</div>
						</p:column>
					</p:row>

					<p:row>
						<p:column>
							<span class=""></span>
							<p:commandLink styleClass="glyphicon glyphicon-ok"
								style="color:#fff" value="Sim" onclick="goBack()">

							</p:commandLink>
						</p:column>

						<p:column>
							<p:commandLink
								styleClass="btn btn-default btn-danger btn-sm btn-block"
								style="color:#fff" value="Não"
								onclick="PF('dlg_escolha_page').hide();PF('statusDialog').hide();"></p:commandLink>
						</p:column>

					</p:row>

				</p:panelGrid>
			</h:form>
		</p:dialog>



		<p:dialog header="Mudança de Status" widgetVar="dialogAlterarStatus"
			modal="false" resizable="false" showEffect="clip" hideEffect="clip">
			<div class="ui-fluid">
				<h:form id="formDialogAlterarStatus">

					<p:panelGrid columns="1" layout="grid">


						<p:selectOneMenu
							value="#{sv_cadastro_controller.diaria.statusCompra}"
							filter="true" filterMatchMode="contains">
							<f:selectItems value="#{sv_cadastro_controller.status}"
								var="status" itemLabel="#{status.nome}" itemValue="#{status}" />
						</p:selectOneMenu>



					</p:panelGrid>
					<center>
						<div class="botao_central" align="left">
							<p:commandLink styleClass="btn btn-primary btn-sm"
								update=":form-cadastro-viagem"
								action="#{sv_cadastro_controller.mudarStatusLancamento()}"
								onclick="start()" onsuccess="stop()" onerror="stop()"
								oncomplete="PF('dialogAlterarStatus').hide()"
								style="color:#fff; margin: 8px 2px;">
								
								Salvar
							</p:commandLink>

							<p:commandLink styleClass="btn btn-primary btn-sm"
								action="#{sv_cadastro_controller.carregarDiarias()}"
								onclick="PF('dialogAlterarStatus').hide()" ajax="false"
								process="@this" style="color:#fff; margin: 8px 2px;">
							Cancelar
							</p:commandLink>

						</div>
					</center>
				</h:form>
			</div>
		</p:dialog>



	</ui:define>


</ui:composition>