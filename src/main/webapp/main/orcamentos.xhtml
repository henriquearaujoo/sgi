<!DOCTYPE html>
<ui:composition template="/WEB-INF/LayoutFullPage.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:jsf="http://xmlns.jcp.org/jsf">

	<ui:define name="content">


		<f:metadata>
			<f:viewAction action="#{orcamento_controller.init()}" />
		</f:metadata>

		<p:link styleClass="btn btn-success btn-sm" id="table-doacao"
			style="position: absolute;
    margin-right: 3vh;
    margin-top: 204px;
    right: 0;"
			outcome="/main/orcamento_cadastro" title="Adicionar orçamento">
			<span class="glyphicon glyphicon-plus"></span>
			<span style="padding: 24px">Novo cadastro</span>
		</p:link>
		<h:form id="form_listagem_orcamento" acceptcharset="ISO-8859-1">

			<p:messages showSummary="false" showDetail="true" closable="true">
				<p:autoUpdate></p:autoUpdate>
			</p:messages>



			<p:breadCrumb>
				<p:menuitem value="Categories" url="home_new.xhtml" />
				<p:menuitem value="Doações" />
			</p:breadCrumb>

			<p:panel>



				<div class="ui-g ui-fluid" style="margin-top: 8px">

					<div class="ui-g-12 ui-md-6 ui-lg-3 form-group">
						<p:outputLabel for="filter-fonte" value="Parceiro:"
							styleClass="form-label" />
						<p:autoComplete id="filter-fonte" styleClass="font12-vi"
							value="#{orcamento_controller.filtro.fontePagadora}" var="fonte"
							scrollHeight="250" itemLabel="#{fonte.nome}" itemValue="#{fonte}"
							converter="fontePagadoraConverter"
							completeMethod="#{orcamento_controller.completeFonte}" />
					</div>

					<div class="ui-g-12 ui-md-6 ui-lg-3 form-group">
						<p:outputLabel for="filter-title" value="Título:"
							styleClass="form-label" />
						<p:inputText id="filter-title"
							value="#{orcamento_controller.filtro.titulo}" />
					</div>



					<div class="ui-g-12 ui-md-6 ui-lg-3 form-group">

						<p:outputLabel for="filter-dt-inicio" value="Data incial:"
							styleClass="form-label" />
						<p:calendar id="filter-dt-inicio"
							value="#{orcamento_controller.filtro.dataInicio}"
							navigator="true" pattern="dd/MM/yyyy" />

					</div>

					<div class="ui-g-12 ui-md-6 ui-lg-3 form-group">

						<p:outputLabel for="filter-dt-final" value="Data final:"
							styleClass="form-label" />
						<p:calendar id="filter-dt-final"
							value="#{orcamento_controller.filtro.dataFinal}" navigator="true"
							pattern="dd/MM/yyyy" />

					</div>

					<div class="ui-g-12 ui-md-6 ui-lg-3 form-group">
						<p:outputLabel for="filter-tecnic" value="Responsável técnico:"
							styleClass="form-label" />
						<p:autoComplete id="filter-tecnic" styleClass="font12-vi"
							value="#{orcamento_controller.filtro.responsavelTecnico}" var="responsavelTecnico"
							itemLabel="#{responsavelTecnico.nome}" itemValue="#{responsavelTecnico}"
							converter="colaboradorConverter"
							scrollHeight="250"
							completeMethod="#{orcamento_controller.completeColaborador}" />
					</div>

					<div class="ui-g-12 ui-md-6 ui-lg-3 form-group">
						<p:outputLabel for="filter-analist" value="Analista financeiro"
							styleClass="form-label" />
						<p:autoComplete id="filter-analist" styleClass="font12-vi"
							value="#{orcamento_controller.filtro.colaborador}" var="colaborador"
							scrollHeight="250" itemLabel="#{colaborador.nome}" itemValue="#{colaborador}"
							converter="colaboradorConverter"
							completeMethod="#{orcamento_controller.completeColaborador}" />
					</div>


					<div>
						

						<p:commandButton styleClass="btn btn-primary btn-sm"
							action="#{orcamento_controller.filtroOrcamento()}"
							onclick="start()" update="table_doacao" onsuccess="stop()"
							onerror="stop()" oncomplete="stop();"
							style="color:#fff; margin: 8px 2px;" value="Buscar" />

					</div>

				</div>



				<p:dataTable id="table_doacao" paginator="true" style="color: white"
					rows="12" value="#{orcamento_controller.orcamentos}" var="doacao">

					<p:column headerText="Parceiro" style="text-align:center" >
						<h:outputText value="#{doacao.fonte.nome}" />
					</p:column>

					<p:column headerText="Título" style="text-align:center">
						<h:outputText value="#{doacao.titulo}" />
					</p:column>

					<p:column headerText="Data inicial" style="text-align:center">
						<h:outputText value="#{doacao.dataInicio}">
							<f:convertDateTime pattern="dd/MM/yyyy" />
						</h:outputText>
					</p:column>
					<p:column headerText="Data final" style="text-align:center">
						<h:outputText value="#{doacao.dataFinal}">
							<f:convertDateTime pattern="dd/MM/yyyy" />
						</h:outputText>
					</p:column>

					<p:column headerText="Responsável técnico"
						style="text-align:center">
						<h:outputText value="#{doacao.responsavelTecnico.nome}" />
					</p:column>

					<p:column headerText="Analista financeiro">
						<h:outputText value="#{doacao.colaborador.nome}" />
					</p:column>




					<p:column headerText="Valor" style="width:160px;text-align:center">
						<h:outputText value="#{doacao.valor}" style="float:right">
							<f:convertNumber type="currency" locale="pt_BR" />
						</h:outputText>
					</p:column>

					<p:column headerText="Opções" style="width:120px;text-align:center">

						<p:link styleClass="btn btn-primary btn-sm"
							outcome="/main/orcamento_cadastro">
							<span class="pi pi-pencil"></span>
							<f:param name="doacao" value="#{doacao.id}" />
						</p:link>

						<p:commandLink style="color:#FFF;margin-left:5px"
							styleClass="btn btn-danger btn-sm "
							action="#{orcamento_controller.remover()}" process="@this"
							update="table_doacao :form_listagem_orcamento">
							<span class="pi pi-times-circle"></span>
							<f:setPropertyActionListener value="#{doacao}"
								target="#{orcamento_controller.orcamento}" />
						</p:commandLink>

					</p:column>
				</p:dataTable>

			</p:panel>
		</h:form>

	</ui:define>

	<ui:define name="adicionais">

	</ui:define>


</ui:composition>