<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="fornecedores" pageWidth="842" pageHeight="595" orientation="Landscape" columnWidth="802" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="f6b36266-b4cd-4e5a-be9c-a1260863e01f">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<style name="table">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<subDataset name="FAS" uuid="ce43a9ca-72a8-4cb1-90f5-00705487af7a">
		<queryString language="SQL">
			<![CDATA[select f.nome_fantasia, f.razao_social,
case when f.tipo = 'juridica' then f.cnpj else f.cpf end as cpfcnpj,
case when f.tipo = 'juridica' then 'Jurídica' else 'Física' end as tipopessoa,
f.endereco, f.telefone, f.email, f.contato, l.nome,
(select max(pl.datapagamento) from pagamento_lancamento pl where contarecebedor_id in
(select cont.id from conta_bancaria cont where cont.fornecedor_id = f.id)) as ultimopag
from fornecedor f, localidade l
where f.cidade_id = l.id]]>
		</queryString>
		<field name="nome_fantasia" class="java.lang.String"/>
		<field name="razao_social" class="java.lang.String"/>
		<field name="cpfcnpj" class="java.lang.String"/>
		<field name="tipopessoa" class="java.lang.String"/>
		<field name="endereco" class="java.lang.String"/>
		<field name="telefone" class="java.lang.String"/>
		<field name="email" class="java.lang.String"/>
		<field name="contato" class="java.lang.String"/>
		<field name="nome" class="java.lang.String"/>
		<field name="ultimopag" class="java.sql.Date"/>
	</subDataset>
	<parameter name="logo" class="java.lang.String"/>
	<queryString>
		<![CDATA[select f.nome_fantasia as nomeFantasia, f.razao_social as razaoSocial,
case when f.tipo = 'juridica' then f.cnpj else f.cpf end as cpfCnpj,
case when f.tipo = 'juridica' then 'Jurídica' else 'Física' end as tipoPessoa,
f.endereco, f.telefone, f.email, f.contato, l.nome as nomeCidade,
to_char((select max(data_emissao) from lancamento l where
(tipo = 'SolicitacaoPagamento' or tipo = 'pedido')
and (select c.fornecedor_id from conta_bancaria c where c.id = l.contarecebedor_id) = f.id), 'dd/MM/yyyy') as ultimoForn
from fornecedor f, localidade l
where f.cidade_id = l.id and 1 = 1]]>
	</queryString>
	<field name="nomeFantasia" class="java.lang.String"/>
	<field name="razaoSocial" class="java.lang.String"/>
	<field name="cpfcnpj" class="java.lang.String"/>
	<field name="tipoPessoa" class="java.lang.String"/>
	<field name="endereco" class="java.lang.String"/>
	<field name="telefone" class="java.lang.String"/>
	<field name="email" class="java.lang.String"/>
	<field name="contato" class="java.lang.String"/>
	<field name="nomeCidade" class="java.lang.String"/>
	<field name="ultimoForn" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="83" splitType="Stretch">
			<image>
				<reportElement x="0" y="0" width="160" height="83" uuid="7113569c-3b06-4db8-ace2-d651a0042b46"/>
				<imageExpression><![CDATA[$P{logo}]]></imageExpression>
			</image>
			<staticText>
				<reportElement x="222" y="19" width="367" height="35" uuid="1641ec24-e799-4bd8-8909-bdb0e204303c"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="18" isBold="false"/>
				</textElement>
				<text><![CDATA[Lista de Fornecedores]]></text>
			</staticText>
			<textField pattern="dd/MM/yyyy HH:mm:ss">
				<reportElement x="702" y="0" width="100" height="20" uuid="93a346ed-8bfa-4dca-8a6a-2cae2aaf19e4"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<columnHeader>
		<band height="31" splitType="Stretch">
			<staticText>
				<reportElement mode="Opaque" x="0" y="0" width="80" height="30" backcolor="#CCCCCC" uuid="7edb1aa2-d5d5-42a4-b818-572c1b07d245"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font isBold="true" isStrikeThrough="false"/>
					<paragraph leftIndent="2"/>
				</textElement>
				<text><![CDATA[Nome]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="80" y="0" width="80" height="30" backcolor="#CCCCCC" uuid="9c69101a-98d1-4b94-b504-2e2f1c81e18c"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font isBold="true" isStrikeThrough="false"/>
					<paragraph leftIndent="2"/>
				</textElement>
				<text><![CDATA[Razão Social]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="160" y="0" width="80" height="30" backcolor="#CCCCCC" uuid="abdae0f3-640d-45f2-8abb-cafca29293c1"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font isBold="true" isStrikeThrough="false"/>
					<paragraph leftIndent="2"/>
				</textElement>
				<text><![CDATA[CPF/CNPJ]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="240" y="0" width="80" height="30" backcolor="#CCCCCC" uuid="891d62b3-c3bd-4ae1-b053-176b76636957"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font isBold="true" isStrikeThrough="false"/>
					<paragraph leftIndent="2"/>
				</textElement>
				<text><![CDATA[Tipo]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="320" y="0" width="80" height="30" backcolor="#CCCCCC" uuid="a9fdd73a-8fec-4b5c-9b15-826150352104"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font isBold="true" isStrikeThrough="false"/>
					<paragraph leftIndent="2"/>
				</textElement>
				<text><![CDATA[Endereço]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="480" y="0" width="80" height="30" backcolor="#CCCCCC" uuid="4277e852-ccfa-4392-b0bf-3e6190d83ce6"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font isBold="true" isStrikeThrough="false"/>
					<paragraph leftIndent="2"/>
				</textElement>
				<text><![CDATA[E-mail]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="560" y="0" width="80" height="30" backcolor="#CCCCCC" uuid="3f238886-e401-453a-b1c3-d230ef73c8b8"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font isBold="true" isStrikeThrough="false"/>
					<paragraph leftIndent="2"/>
				</textElement>
				<text><![CDATA[Contato]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="640" y="0" width="80" height="30" backcolor="#CCCCCC" uuid="b1629c0e-9423-4371-94d8-1a6b6b233ea2"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font isBold="true" isStrikeThrough="false"/>
					<paragraph leftIndent="2"/>
				</textElement>
				<text><![CDATA[Cidade]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="720" y="0" width="82" height="30" backcolor="#CCCCCC" uuid="6d15f2ea-8394-4d44-8131-deb3699f50c4"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement verticalAlignment="Middle" markup="styled">
					<font isBold="true" isStrikeThrough="false"/>
					<paragraph leftIndent="2"/>
				</textElement>
				<text><![CDATA[Último Fornecimento]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="400" y="0" width="80" height="30" backcolor="#CCCCCC" uuid="877bc567-e826-4048-abf2-a40b851bd4db"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font isBold="true" isStrikeThrough="false"/>
					<paragraph leftIndent="2"/>
				</textElement>
				<text><![CDATA[Telefone]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="23" splitType="Stretch">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToBandHeight" x="0" y="0" width="80" height="20" uuid="93abd4f1-2d56-49f3-9dbf-ed054c823b5c"/>
				<box>
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0" lineStyle="Solid"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<paragraph lineSpacing="Single" leftIndent="2"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nomeFantasia}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement stretchType="RelativeToBandHeight" x="80" y="0" width="80" height="20" uuid="b672e712-e55c-4c97-99d2-6f3b4ae19bf4"/>
				<box>
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0" lineStyle="Solid"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<paragraph leftIndent="2" spacingAfter="5"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{razaoSocial}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement stretchType="RelativeToBandHeight" x="160" y="0" width="80" height="20" uuid="a62a865f-b48e-4c7a-a02e-33bc5b434d0e"/>
				<box>
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0" lineStyle="Solid"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<paragraph leftIndent="2" spacingAfter="5"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cpfcnpj}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement stretchType="RelativeToBandHeight" x="240" y="0" width="80" height="20" uuid="7a87bdee-a8bf-47f2-bbe7-2bbc1e9ab652"/>
				<box>
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0" lineStyle="Solid"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<paragraph leftIndent="2" spacingAfter="5"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{tipoPessoa}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToBandHeight" x="320" y="0" width="80" height="20" uuid="ec9e3663-7dfa-4dcd-87ed-c9b32bb620fe"/>
				<box>
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0" lineStyle="Solid"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<paragraph leftIndent="2" spacingAfter="5"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{endereco}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement stretchType="RelativeToBandHeight" x="400" y="0" width="80" height="20" uuid="5fb23448-d5ee-44f7-86d9-e0e6e038da08"/>
				<box>
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0" lineStyle="Solid"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<paragraph leftIndent="2" spacingAfter="5"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{telefone}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToBandHeight" x="480" y="0" width="80" height="20" uuid="dd606985-350a-46f2-815d-6e945dbf8791"/>
				<box>
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0" lineStyle="Solid"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<paragraph leftIndent="2" spacingAfter="5"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{email}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement stretchType="RelativeToBandHeight" x="560" y="0" width="80" height="20" uuid="bb5ee5f3-9b97-45a6-9787-2e057c8b8aed"/>
				<box>
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0" lineStyle="Solid"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<paragraph leftIndent="2" spacingAfter="5"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{contato}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement stretchType="RelativeToBandHeight" x="640" y="0" width="80" height="20" uuid="83434d37-dee5-4abc-a24c-421b50493e03"/>
				<box>
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0" lineStyle="Solid"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<paragraph leftIndent="2" spacingAfter="5"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nomeCidade}]]></textFieldExpression>
			</textField>
			<textField pattern="" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToBandHeight" x="720" y="0" width="82" height="20" uuid="bfe82072-e09f-4503-a6d9-4d36ee25c5b6"/>
				<box>
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0" lineStyle="Solid"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<paragraph leftIndent="2" spacingAfter="5"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ultimoForn}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="20" splitType="Stretch">
			<textField>
				<reportElement x="320" y="0" width="80" height="20" uuid="665ef548-07d8-43ce-9ac9-d846ea082d14"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA["Página "+$V{PAGE_NUMBER}+" de"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement x="400" y="0" width="40" height="20" uuid="e6f1400a-a5fa-4332-957e-f7b99200fd71"/>
				<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
</jasperReport>
