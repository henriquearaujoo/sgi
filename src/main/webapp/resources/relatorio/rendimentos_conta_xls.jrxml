<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="rendimentos" pageWidth="800" pageHeight="595" orientation="Landscape" columnWidth="760" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="f6b36266-b4cd-4e5a-be9c-a1260863e01f">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<style name="table">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<subDataset name="FAS" uuid="ce43a9ca-72a8-4cb1-90f5-00705487af7a">
		<queryString language="SQL">
			<![CDATA[select f.nome_fantasia, f.razao_social,
case when f.tipo = 'juridica' then f.cnpj else f.cpf end as cpfcnpj,
case when f.tipo = 'juridica' then 'Jurídica' else 'Física' end as tipopessoa,
f.endereco, f.telefone, f.email, f.contato, l.nome,
(select max(pl.datapagamento) from pagamento_lancamento pl where contarecebedor_id in
(select cont.id from conta_bancaria cont where cont.fornecedor_id = f.id)) as ultimopag
from fornecedor f, localidade l
where f.cidade_id = l.id]]>
		</queryString>
		<field name="nome_fantasia" class="java.lang.String"/>
		<field name="razao_social" class="java.lang.String"/>
		<field name="cpfcnpj" class="java.lang.String"/>
		<field name="tipopessoa" class="java.lang.String"/>
		<field name="endereco" class="java.lang.String"/>
		<field name="telefone" class="java.lang.String"/>
		<field name="email" class="java.lang.String"/>
		<field name="contato" class="java.lang.String"/>
		<field name="nome" class="java.lang.String"/>
		<field name="ultimopag" class="java.sql.Date"/>
	</subDataset>
	<queryString>
		<![CDATA[select rc.datapagamento
	, competencia
	, descricao
	, rc.valor
	, coalesce(b.nomebanco, '') || ' ag.: ' || cb.numero_agencia || (case when cb.digito_agencia is null then '' else '-' || cb.digito_agencia end) || ' conta: ' || cb.numero_conta || (case when cb.digito_conta is null then '' else '-' || cb.digito_conta end) as contarecebedora
	, coalesce(bp.nomebanco, '') || ' ag.: ' || cbp.numero_agencia || (case when cbp.digito_agencia is null then '' else '-' || cbp.digito_agencia end) || ' conta: ' || cbp.numero_conta || (case when cbp.digito_conta is null then '' else '-' || cbp.digito_conta end) as contapagadora
	, o.titulo as fontedoacao
	, u.nomeusuario
from rendimento_conta rc
join conta_bancaria cb on cb.id = rc.conta_id
left join banco b on b.id = cb.banco_id
join conta_bancaria cbp on cbp.id = rc.contapagadora_id
left join banco bp on b.id = cbp.banco_id
join usuario u on u.id = rc.usuario_id
left join orcamento o on o.id = rc.orcamento_id ]]>
	</queryString>
	<field name="datapagamento" class="java.lang.String"/>
	<field name="competencia" class="java.lang.String"/>
	<field name="descricao" class="java.lang.String"/>
	<field name="valor" class="java.math.BigDecimal"/>
	<field name="contarecebedora" class="java.lang.String"/>
	<field name="contapagadora" class="java.lang.String"/>
	<field name="fontedoacao" class="java.lang.String"/>
	<field name="nomeusuario" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="31">
			<staticText>
				<reportElement mode="Opaque" x="0" y="0" width="100" height="30" backcolor="#CCCCCC" uuid="7edb1aa2-d5d5-42a4-b818-572c1b07d245"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font isBold="true" isStrikeThrough="false"/>
					<paragraph leftIndent="2"/>
				</textElement>
				<text><![CDATA[Data do Pagamento]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="100" y="0" width="91" height="30" backcolor="#CCCCCC" uuid="9c69101a-98d1-4b94-b504-2e2f1c81e18c"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font isBold="true" isStrikeThrough="false"/>
					<paragraph leftIndent="2"/>
				</textElement>
				<text><![CDATA[Valor]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="191" y="0" width="80" height="30" backcolor="#CCCCCC" uuid="abdae0f3-640d-45f2-8abb-cafca29293c1"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font isBold="true" isStrikeThrough="false"/>
					<paragraph leftIndent="2"/>
				</textElement>
				<text><![CDATA[Competência]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="521" y="0" width="132" height="30" backcolor="#CCCCCC" uuid="891d62b3-c3bd-4ae1-b053-176b76636957"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font isBold="true" isStrikeThrough="false"/>
					<paragraph leftIndent="2"/>
				</textElement>
				<text><![CDATA[Fonte/Doação]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="653" y="0" width="107" height="30" backcolor="#CCCCCC" uuid="a9fdd73a-8fec-4b5c-9b15-826150352104"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font isBold="true" isStrikeThrough="false"/>
					<paragraph leftIndent="2"/>
				</textElement>
				<text><![CDATA[Usuário]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="271" y="0" width="126" height="30" backcolor="#CCCCCC" uuid="ca306116-5e63-44bb-a197-9517837c32af"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font isBold="true" isStrikeThrough="false"/>
					<paragraph leftIndent="2"/>
				</textElement>
				<text><![CDATA[Conta Recebedora]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="397" y="0" width="124" height="30" backcolor="#CCCCCC" uuid="01c3ef73-97db-471b-8cc5-5e2c7afc28da"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font isBold="true" isStrikeThrough="false"/>
					<paragraph leftIndent="2"/>
				</textElement>
				<text><![CDATA[Conta Pagadora]]></text>
			</staticText>
		</band>
	</title>
	<detail>
		<band height="21" splitType="Stretch">
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToBandHeight" x="0" y="1" width="100" height="20" uuid="93abd4f1-2d56-49f3-9dbf-ed054c823b5c"/>
				<box>
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0" lineStyle="Solid"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font isStrikeThrough="false"/>
					<paragraph lineSpacing="Single" leftIndent="2"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{datapagamento}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="###0.00" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToBandHeight" x="100" y="1" width="91" height="20" uuid="b672e712-e55c-4c97-99d2-6f3b4ae19bf4"/>
				<box>
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0" lineStyle="Solid"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<paragraph leftIndent="2" spacingAfter="5"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{valor}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToBandHeight" x="653" y="1" width="107" height="20" uuid="ec9e3663-7dfa-4dcd-87ed-c9b32bb620fe"/>
				<box>
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0" lineStyle="Solid"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<paragraph leftIndent="2" spacingAfter="5"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nomeusuario}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToBandHeight" x="397" y="1" width="124" height="20" uuid="b1aa2b6f-7413-4677-be82-7161a367aab5"/>
				<box>
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0" lineStyle="Solid"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<paragraph leftIndent="2" spacingAfter="5"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{contapagadora}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToBandHeight" x="521" y="1" width="132" height="20" uuid="7a87bdee-a8bf-47f2-bbe7-2bbc1e9ab652"/>
				<box>
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0" lineStyle="Solid"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<paragraph leftIndent="2" spacingAfter="5"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{fontedoacao}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToBandHeight" x="271" y="1" width="126" height="20" uuid="5b5ddf5c-e3bd-41b0-bca0-3977f24f6cdf"/>
				<box>
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0" lineStyle="Solid"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<paragraph leftIndent="2" spacingAfter="5"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{contarecebedora}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToBandHeight" x="191" y="1" width="80" height="20" uuid="a62a865f-b48e-4c7a-a02e-33bc5b434d0e"/>
				<box>
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0" lineStyle="Solid"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<paragraph leftIndent="2" spacingAfter="5"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{competencia}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
